#pragma checksum "D:\Source\AuxiliarC_V3_Alpha\Beehouse.Essentials.Web.Components\Table\RazorPagination.razor" "{ff1816ec-aa5e-4d10-87f7-6f4963833460}" "ae58bf94a9cf3e309dd4eb1dcd4349d78d9e2211"
// <auto-generated/>
#pragma warning disable 1591
#pragma warning disable 0414
#pragma warning disable 0649
#pragma warning disable 0169

namespace Beehouse.Essentials.Web.Components.Table
{
    #line hidden
    using System;
    using System.Collections.Generic;
    using System.Linq;
    using System.Threading.Tasks;
    using Microsoft.AspNetCore.Components;
    using Microsoft.AspNetCore.Components.Forms;
    using System.Text;
    public class RazorPagination : Microsoft.AspNetCore.Components.ComponentBase
    {
        #pragma warning disable 1998
        protected override void BuildRenderTree(Microsoft.AspNetCore.Components.RenderTree.RenderTreeBuilder builder)
        {
        }
        #pragma warning restore 1998
#line 34 "D:\Source\AuxiliarC_V3_Alpha\Beehouse.Essentials.Web.Components\Table\RazorPagination.razor"
 
    [Parameter] int Page { get; set; }
    [Parameter] EventCallback<int> PageChanged { get; set; }

    [Parameter] int Limit { get; set; }
    [Parameter] EventCallback<int> LimitChanged { get; set; }

    [Parameter] int Count { get; set; }
    [Parameter] EventCallback<int> CountChanged { get; set; }

    [Parameter] ICollection<KeyValuePair<string, string>> Filters { get; set; }
    [Parameter] EventCallback<ICollection<KeyValuePair<string, string>>> FiltersChanged { get; set; }

    string BaseUrl { get; set; }

    // Configuration Variables
    int LinkCount = 6;
    int LinkInit = 1;


    // State variables
    bool IsFirstPage;
    bool IsLastPage;
    int PageCount;

    protected override void OnParametersSet()
    {
        // Avoid zero
        Limit = Limit == 0 ? 10 : Limit;
        Page = Page == 0 ? 1 : Page;

        // Calc page count
        var pageCountFactor = (decimal)Count / (decimal)Limit;
        PageCount = pageCountFactor % 1 != 0 || pageCountFactor < 1
            ? (int)(pageCountFactor - (pageCountFactor % 1) + 1)
            : (int)pageCountFactor;

        IsFirstPage = Page == 1;
        IsLastPage = Page == PageCount;
        LinkInit = Page - LinkCount / 2 <= 1 ? 1 : Page - LinkCount / 2;

        // Get Base url
        BaseUrl = UriHelper.GetAbsoluteUri().Split('?')[0];
    }

    protected async Task OnPageClick(string uri, int page)
    {
        UriHelper.NavigateTo(uri, false);
        await PageChanged.InvokeAsync(page);
    }

    public string GetQueryStringFilters()
    {
        // Check filters
        if (Filters == null)
        {
            return "";
        }



        // Builder
        var builder = new StringBuilder();

        // Check all query items
        foreach (var item in Filters)
        {
            // Check if is pagination value (page, limit, etc) and not a filter
            if (IsPaginationValue(item.Key)) { continue; }

            // Append &
            builder.Append("&");

            // Append filter to querystring
            builder.Append(item.Key.ToLower() + "=" + item.Value);
        }

        // Returns querystring
        return builder.ToString();
    }

    private bool IsPaginationValue(string s)
    {
        switch (s)
        {
            case "page":
            case "limit":
                return true;
            default:
                return false;
        }
    }

#line default
#line hidden
        [global::Microsoft.AspNetCore.Components.InjectAttribute] private Microsoft.AspNetCore.Components.IUriHelper UriHelper { get; set; }
    }
}
#pragma warning restore 1591
